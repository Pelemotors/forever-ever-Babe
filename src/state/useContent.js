import { create } from 'zustand';

// Import content data
const contentData = {
  "branding": {
    "tagline": "For Ever & Ever Babe"
  },
  "hero": {
    "title": "הבית שלנו מתחיל בך",
    "subtitle": "התחלנו כחברים, ומצאנו את הדרך להיות בית.\nפלא, מיראל, והרבה רגעים קטנים שמחזיקים אותנו.\nזה המקום שבחרנו להגיד תודה ולהזכיר לך: את המרכז שלנו.",
    "cta": "נכנסים לחגוג",
    "image": "/media/wedding_couple_intimate.jpg",
    "image_alt": "רגע אינטימי של אהבה וחיבור - גל ואירה מחייכים ומתכרבלים"
  },
  "story": {
    "title": "הסיפור שלנו",
    "intro": [
      "הכרנו דרך עבודה. עבדנו ביחד מהרגע הראשון. עוד כשהכרתי אותך מוכרת מכוניות , אבל לא מחזיקה רשיון נהיגה. עשית עליי רושם מהרגע הראשון. תחומי עניין מוזרים כמו שלי . שפה משותפת, ואיזה יפה את אלוהים . נדיר. האמת אף פעם לא הכרתי מישהי כמוך, אבל השתדלתי לא להתרכז בזה מידי, בטח בזמנו זה לא התאים. עוד היינו במקומות אחרים בחיינו.",
      "הזמן עבר, וכבר עבדנו יחד באותה חברה, באותה גזרה, מתעסקים באותם נושאים ואנשים. המשותף גדל, ההיכרות התרחבה, וגם היה כיף יחד, ידענו לצחוק הרבה, ידענו לעבוד היטב, אם יש משהו שהבנו מהר, זה שאנחנו צוות טוב.",
      "יחד עם כל השינויים בחיים שלנו, הגורל מצא את הדרך להפגיש אותנו גם כשלא עבדנו יחד.",
      "לקחנו צאנס וניסינו.",
      "הפסיק להיות הכל ורודחחחח",
      "פתאום גילינו צדדים גם פחות מושלמים האחד בשני, אבל יש משהו שאי אפשר להכחיש.",
      "אני ואת זה לתמיד. אנחנו תמיד נשלים . אנחנו זה הסיפור הזה של האחד ל..",
      "זה אנחנו .",
      "עדיין לא נתפס לי , בכל בוקר, בכל ערב, לא מעכל שאת אישתי , ואיזה בית ומשפחה הקמת לי . כל מה שרציתי הענקת לי . זה לא אומר שאת יכולה להפסיק חחח",
      "תמשיכי להעניק, את טובה בזה ולי כיף לקבל חחח",
      "אני לא יכול בלעדייך אירה שלי, אל תעזבי אותי ;)",
      "אני רוצה להיות זה שאת צועקת עליו בסופר שהוא לקח חלב לא נכון, או לא לקח חלב. אני רוצה להיות זה שמבהיל אותך כשהוא מחזיק את הילדה הפוכה מהקרסוליים, אני רוצה להיות זה שמצחיק אותך כל כך עד שכואבת לך הבטן, אני רוצה להחזיק לך את היד ולהגיד לך שהכל יהיה בסדר כשכואבת לך הבטןחחחח",
      "אני כל כך רוצה להיות שם איתך בכל רגע אפשרי.",
      "את אהבת חיי האחת והיחידה אירה שלי .",
      "מקווה שהאתר הזה יצליח לרכז לך מעט ממה שאני והילדים חושבים עלייך ."
    ],
    "house_rules": [
      "לא לתקשר — אבל באמת זה: פחות לדבר, יותר להקשיב לשני.",
      "לחזור עם חלב הביתה שומר על שלום בית"
    ],
    "gratitude": [
      "תודה על הקפה שטעים רק אם הוא איתך, ועל החיוך כשלא קל.",
      "תודה על פלא—איך שאת מגדלת אותו איתי, באמת, גם ברגעים הקשים.",
      "תודה על מיראל—על המנוע החדש של אושר ומתיקות בבית.",
      "ותודה על מי שאת—המרכז שלנו."
    ],
    "habits": [
      "טוסטים וסלט בערב= ערב רומנטי'.",
      "קפה טעים רק כשאת לידי.",
      "לארוחות שחיתות יש חוקים: מגזימים ביחד, מתחרטים ביחד, צוחקים ביחד.",
      "לחזור עם חלב הביתה מהעבודה = אהבת אמת ונאמנות.",
      "נסיעה בלילה עם Desert Rose שווה יותר מכל תוכנית.",
      "אם אני אומר 'קראתי במאמר…', את יודעת שאני מנסה לגנוב משהו—וצוחקת.",
      "כשאין מילים, יש חיבוק."
    ],
    "playlist": {
      "blurb": "יש שירים שהם זמן. Desert Rose הוא שלנו—לילה רגוע, כביש פתוח, ושקט שמבין אותנו."
    }
  },
  "stories": [
    {
      "id": "first-trip-germany",
      "title": "החופשה הראשונה (גרמניה)",
      "status": "public",
      "unlockAt": null,
      "body": [
        "החופשה הראשונה, התוצאה פנסטסטית, אבל החופשה עצמה הייתה מורכבת בלשון המעטה ;)",
        "טסנו לגרמניה למשפחה שלך ששמעתי עליה בתור חבר לעבודה לא מעט. היינו משתפים גם לגבי החיים האישיים שלנו. ניסינו בעיקר לספר על דברים טובים כדי שלא נדע כמה אנחנו סובליםחחחח",
        "בכל מקרה , ידעתי שאנחנו נוסעים לפגוש סבתא חביבה שאת מאוד אוהבת, ודודה ואת בעלה. זה בערך מה שהבנתי . לא חשבתי שיהיה לי מורכב או מוזר בגרמניה, אני טיפוס כזה שמסתדר בכל מקום סהכ, ובאמת התרגשתי לקראת החוויה הזו איתך. ",
        "אני חייב להודות שאני לא זוכר מידי את הנסיעה אל נתבג, לא זוכר מידי את הדיוטי , אני מניח שהייתי בלחץ של שירותים , תמיד זה קורה לי בטיסות , ואת גם רגילה כבר שהבטן שלי מנהלת לנו את החיים אז הכל סבבה. לא זוכר יותר מידי את הטיסה, לקחתי איזה כדור שינה ? ",
        "גם הנסיעה מהשדה אל סבתא הייתה סהכ סבבה, למרות שהייתי עם כאבים חזקים מזה שנפלתי על הצלעות שבוע לפני, באמת הכל היה סהכ סבבה. ",
        "אבל מרגע שהגענו משהו אצלך השתנה. היית לחוצה, ממהרת , דואגת, כל מיני דברים שלא הסתדרו לי לגבי חופשה. אני זוכר בעיקר כמה דאגת לגבי זמנים חחחחח",
        "'הם גרמנים , בגרמניה מאוד חשוב עמידה בזמנים . הם מכבדים אותנו ואנחנו נכבד אותם , ככה נהוג פה' ",
        "חחחח",
        "כל כך לא מייצג אותי בחופשות חחח ",
        "אני כבר לא זוכר אם אני רציתי להתבטל ולטייל לבד, או רציתי זמן חופשי, אני באמת לא זוכר מה הפריע לי, אני גם לא ככ זוכר מה הפריע לך , אבל אני זוכר שהיה לנו קשוח. ",
        "אני זוכר רגעים שהרגשתי שאת מסתכלת עליי ומרגישה שאת מביטה בזר מוחלט.",
        "באותה מידה אני זוכר את עצמי מביט בך מחוץ לבקתת העץ רדופת השדים באחד מהרי האלפים או שוויץ או איפה שהיינו, ואומר לעצמי 'אם היא יוצאת לי מהחיים, לא יהיה משהו שישתווה לזה לעולם'.",
        "הרגשתי כאילו הימרתי כשהעזתי להגיע אלייך עם טבעת בערך שבוע אחריי (מקווה שאני מדייק בזמנים), לא הייתי בטוח מה תחשבי, אבל ידעתי שאני לא מקבל 'לא' כתשובה. לא היום, מחר, לא מחר, מחרתיים , 'אני אנעץ אותך'חחחח",
        "הלקח מהחופשה שלנו: ",
        "1. אני לא יכול בלעדייך",
        "2. אני אעשה הכל כדי שתהיי שלי "
      ]
    },
    {
      "id": "toasts-and-salad",
      "title": "טוסטים וסלט",
      "status": "public",
      "unlockAt": null,
      "body": [
        "יש מנות של מסעדות, ויש 'טוסטים וסלט'. בכל מקרה איתך הכי טעים ונעים לי . בכללי אני בכלל לא אוהב לאכול בחברת אנשים אחרים. איתך כל ארוחה היא  הכי טובה בעולם, רק בגללך. זה נהיה חלק מאיתנו, לאכול יחד . ובכל זאת , בדרך כשאני חושב על ארוחת ערב שלנו אני חושב על טוסטים וסלט, שאת הרגלת אותי כמה מפנקים הם יכולים להיות , וזה כרגיל, בזכותך, כי את שם , אהבת חיי שנותנת טעם להכל. כל יום כשאני חושב על הערב ועל ארוחת הערב, הדיפולט שלי הוא טוסטים וסלט, כי זה מזכיר לי אותנו ואת זה שאת איתי ."
      ]
    }
  ],
  "addons": {
    "researchUI": {
      "title": "מחקרים אומרים…",
      "verbatim": true,
      "buttons": { "showTruth": "האמת שלי", "next": "עוד אחד", "later": "לא היום" },
      "note": "כולנו יודעים שזה אני 😉"
    },
    "researchNudge": {
      "enabled": true,
      "probability": 0.35,
      "maxPerSession": null,
      "excludedRoutes": ["/login", "/admin"],
      "respectSafeArea": true
    },
    "researchCards": [
      {
        "id": "coffee-with-you",
        "tag": "coffee",
        "fake": "מחקרים אומרים:\nקפה טעים ב-97% יותר כששותים אותו עם מי שממש אוהב קפה.",
        "truth": "האמת שלי:\nאני שונא קפה — חוץ משלך וכשאת יושבת איתי."
      },
      {
        "id": "milk-peace",
        "tag": "milk",
        "fake": "קראתי לאחרונה מחקר: \nחלב נכון מעלה 23% סיכוי לשמור על שלום בית.",
        "truth": "האמת שלי:\nלחזור עם חלב הביתה = להגיד \"אני אוהב אותך\"."
      },
      {
        "id": "toast-salad",
        "tag": "toast",
        "fake": "מחקרים אומרים:\nטוסטים וסלט הם ארוחת ערב שמראה על זוגיות שממש נהנים בה מחיי המין .",
        "truth": "האמת שלי:\nזה אנחנו. פשוט, חם, וגורם לי לחשוב עלייך מיד."
      },
      {
        "id": "desert-rose-drive",
        "tag": "desert-rose",
        "fake": "מחקרים אומרים:\nלנסוע בלילה עם השיר הנכון ברדיו משפרת מצב רוח ב-42%.",
        "truth": "האמת שלי:\nאני שונא לנהוג, אבל לנסוע איתך זה משהו אחר לגמרי"
      },
      {
        "id": "no-communication",
        "tag": "communication",
        "fake": "מחקרים אומרים:\nזוגות שמדברים פחות — רבים פחות.",
        "truth": "האמת שלי:\nפחות לדבר, יותר להקשיב. זה הכלל בבית."
      },
      {
        "id": "fake-research-code",
        "tag": "joke",
        "fake": "מחקרים אומרים:\nפתיחת שיחה ב\"קראתי במאמר…\" מגדילה משמעותית סיכוי לשכנוע.",
        "truth": "האמת שלי:\nאם אמרתי \"מאמר\" — את יודעת שאני מנסה להוציא ממך משהו. 😉"
      },
      {
        "id": "germany-timing",
        "tag": "germany",
        "fake": "מחקרים אומרים:\nאיחור של 3 דקות הורס את הסדר בגרמניה.",
        "truth": "האמת שלי:\nבגרמניה למדתי — את חשובה לי יותר מהשגעונות שלך."
      },
      {
        "id": "first-trip-hard",
        "tag": "trip",
        "fake": "מחקרים אומרים:\nחופשה זוגית ראשונה מנבאת התאמה עתידית.",
        "truth": "האמת שלי:\nהיה קשוח — אבל הבנתי שרק איתך שווה לריב כי רק איתך שווה להשלים."
      },
      {
        "id": "pla-parenting",
        "tag": "pla",
        "fake": "מחקרים אומרים:\nהורות נכונה מצריכה לפחות 12 שיטות שונות.",
        "truth": "האמת שלי:\nאת, פלא, וסבלנות — זה מה שעובד באמת, ומלמד אותי כל כך הרבה"
      },
      {
        "id": "miral-engine",
        "tag": "miral",
        "fake": "מחקרים אומרים:\nתינוקות מורידים את היקף שעות השינה של אבא ב-55%.",
        "truth": "האמת שלי:\nמיראל היא האור שלנו בבית."
      },
      {
        "id": "home-by-you",
        "tag": "home",
        "fake": "מחקרים אומרים:\nבית נבנה מריהוט נכון, פונקציונליות, חיסכון בכיס ותאורה חמה.",
        "truth": "האמת שלי:\nבית נבנה ממך. כל השאר זה בונוס."
      },
      {
        "id": "argue-repair",
        "tag": "argue",
        "fake": "מחקרים אומרים:\nהכעס מתפוצץ — אין דרך חזרה.",
        "truth": "האמת שלי:\nאצלנו תמיד חוזרים להשלים. זה אנחנו. For Ever&Ever Babe"
      },
      {
        "id": "research-admission",
        "tag": "meta",
        "fake": "מחקרים אומרים:\nבן הזוג תמיד צודק כשהוא מצטט \"מחקרים\" , ומגיע לו מין אוראלי .",
        "truth": "האמת שלי:\nאני אעשה הכל כדי לגרום לך לצחוק ולחייך, ואני אוהב אותך יותר מכל דבר אחר בעולם."
      }
    ]
  }
};

const useContent = create((set, get) => ({
  content: contentData,
  loading: false,
  error: null,

  // Get hero data
  getHero: () => {
    const { content } = get();
    console.log('getHero called, content:', content);
    return content.hero;
  },

  // Get branding
  getBranding: () => {
    const { content } = get();
    return content.branding;
  },

  // Get story
  getStory: () => {
    const { content } = get();
    return content.story;
  },

  // Get all stories
  getStories: () => {
    const { content } = get();
    return content.stories || [];
  },

  // Get story by ID
  getStoryById: (id) => {
    const { content } = get();
    const stories = content.stories || [];
    return stories.find(story => story.id === id);
  },

  // Get public stories only
  getPublicStories: () => {
    const { content } = get();
    const stories = content.stories || [];
    return stories.filter(story => {
      if (story.status === 'private') return false;
      if (story.status === 'public') return true;
      if (story.unlockAt) {
        const unlockDate = new Date(story.unlockAt);
        return new Date() >= unlockDate;
      }
      return true;
    });
  },

  // Check if story is unlocked
  isStoryUnlocked: (story) => {
    if (story.status === 'private') return false;
    if (story.status === 'public') return true;
    if (story.unlockAt) {
      const unlockDate = new Date(story.unlockAt);
      return new Date() >= unlockDate;
    }
    return true;
  },

  // Get research UI settings
  getResearchUI: () => {
    const { content } = get();
    return content.addons?.researchUI || {};
  },

  // Get research nudge settings
  getResearchNudge: () => {
    const { content } = get();
    return content.addons?.researchNudge || {};
  },

  // Get research cards
  getResearchCards: () => {
    const { content } = get();
    return content.addons?.researchCards || [];
  },

  // Reload content (for future use)
  reloadContent: async () => {
    set({ loading: true, error: null });
    try {
      // In MVP, we're using static import
      // In future, could fetch from API
      set({ content: contentData, loading: false });
    } catch (error) {
      set({ error: error.message, loading: false });
    }
  },
}));

export default useContent;

